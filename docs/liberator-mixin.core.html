<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>liberator-mixin.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Liberator-mixin</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>liberator-mixin</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>authorisation</span></div></div></li><li class="depth-3 branch"><a href="liberator-mixin.authorisation.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3"><a href="liberator-mixin.authorisation.unverified.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unverified</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>context</span></div></div></li><li class="depth-3"><a href="liberator-mixin.context.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="liberator-mixin.core.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hal</span></div></div></li><li class="depth-3"><a href="liberator-mixin.hal.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>hypermedia</span></div></div></li><li class="depth-3"><a href="liberator-mixin.hypermedia.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>json</span></div></div></li><li class="depth-3"><a href="liberator-mixin.json.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>logging</span></div></div></li><li class="depth-3"><a href="liberator-mixin.logging.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>validation</span></div></div></li><li class="depth-3"><a href="liberator-mixin.validation.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="liberator-mixin.core.html#var-and-comparator"><div class="inner"><span>and-comparator</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-build-resource"><div class="inner"><span>build-resource</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-get-comparator"><div class="inner"><span>get-comparator</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-is-action.3F"><div class="inner"><span>is-action?</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-is-configuration.3F"><div class="inner"><span>is-configuration?</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-is-decision.3F"><div class="inner"><span>is-decision?</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-is-handler.3F"><div class="inner"><span>is-handler?</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-merge-actions"><div class="inner"><span>merge-actions</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-merge-configurations"><div class="inner"><span>merge-configurations</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-merge-decisions"><div class="inner"><span>merge-decisions</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-merge-handlers"><div class="inner"><span>merge-handlers</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-merge-resource-definitions"><div class="inner"><span>merge-resource-definitions</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-or-comparator"><div class="inner"><span>or-comparator</span></div></a></li><li class="depth-1"><a href="liberator-mixin.core.html#var-or-decisions"><div class="inner"><span>or-decisions</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">liberator-mixin.core</h1><div class="doc"><div class="markdown"><p>Functions for defining liberator mixins: partial liberator resource definitions that can be composed together to build up a liberator resource with canned functionality.</p>
<p>The most important function in this namespace is <a href="liberator-mixin.core.html#var-build-resource">build-resource</a> which accepts a sequence of liberator mixins (or resource definition maps) and produces a liberator resource.</p></div></div><div class="public anchor" id="var-and-comparator"><h3>and-comparator</h3><div class="usage"><code>(and-comparator left right)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L175">view source</a></div></div><div class="public anchor" id="var-build-resource"><h3>build-resource</h3><div class="usage"><code>(build-resource &amp; ms-or-seqs)</code></div><div class="doc"><div class="markdown"><p>Builds a liberator resource from the specified resource definitions, specified as either maps or sequences of maps.</p>
<p>This function represents the core of the mixin functionality in that each mixin produces either a map or a sequence of maps representing partial resource definitions.</p>
<p>The resource definitions are merged together using <a href="liberator-mixin.core.html#var-merge-resource-definitions">merge-resource-definitions</a>. See the documentation there for specific details of the merge process used.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L219">view source</a></div></div><div class="public anchor" id="var-get-comparator"><h3>get-comparator</h3><div class="usage"><code>(get-comparator decision)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L179">view source</a></div></div><div class="public anchor" id="var-is-action.3F"><h3>is-action?</h3><div class="usage"><code>(is-action? k)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if <code>k</code>, a keyword, represents a liberator action, <code>false</code> otherwise.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L21">view source</a></div></div><div class="public anchor" id="var-is-configuration.3F"><h3>is-configuration?</h3><div class="usage"><code>(is-configuration? k)</code></div><div class="doc"><div class="markdown"><p>Return <code>true</code> if <code>k</code>, a keyword, represents a liberator configuration parameter, <code>false</code> otherwise.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L33">view source</a></div></div><div class="public anchor" id="var-is-decision.3F"><h3>is-decision?</h3><div class="usage"><code>(is-decision? k)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if <code>k</code>, a keyword, represents a liberator decision, <code>false</code> otherwise.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L15">view source</a></div></div><div class="public anchor" id="var-is-handler.3F"><h3>is-handler?</h3><div class="usage"><code>(is-handler? k)</code></div><div class="doc"><div class="markdown"><p>Returns <code>true</code> if <code>k</code>, a keyword, represents a liberator handler, <code>false</code> otherwise.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L27">view source</a></div></div><div class="public anchor" id="var-merge-actions"><h3>merge-actions</h3><div class="usage"><code>(merge-actions left right)</code></div><div class="doc"><div class="markdown"><p>Merges together two liberator actions, <code>left</code> and <code>right</code>.</p>
<p>The resulting action will execute both actions in the order <code>left</code> first, then <code>right</code>, such that the <code>right</code> action will see any context updates made by the <code>left</code>. The result will be that of the <code>right</code> action.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L92">view source</a></div></div><div class="public anchor" id="var-merge-configurations"><h3>merge-configurations</h3><div class="usage"><code>(merge-configurations left right)</code></div><div class="doc"><div class="markdown"><p>Merges together two liberator configuration parameters, <code>left</code> and <code>right</code>.</p>
<p>The resulting configuration parameter will be deduced as follows:</p>
<ul>
  <li>If <code>right</code> includes <code>:replace</code> in its metadata, the result will be <code>right</code>.</li>
  <li>If <code>left</code> results in a list, the result will be a list containing all elements from <code>right</code> followed by all elements from <code>left</code>, such that <code>right</code> takes precedence.</li>
  <li>If <code>left</code> results in a vector, the result will be a vector containing all elements from <code>right</code> followed by all elements from <code>left</code>, such that <code>right</code> takes precedence.</li>
  <li>If <code>left</code> results in a set, the result will be a set containing the union of <code>left</code> and <code>right</code>.</li>
  <li>Otherwise, the result will be <code>right</code>.</li>
</ul>
<p>Both <code>left</code> and <code>right</code> can also be functions taking <code>context</code> returning in line with the above types.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L118">view source</a></div></div><div class="public anchor" id="var-merge-decisions"><h3>merge-decisions</h3><div class="usage"><code>(merge-decisions left right comparator)</code></div><div class="doc"><div class="markdown"><p>Merges together two liberator decisions, <code>left</code> and <code>right</code>.</p>
<p>Decisions can return various different shapes of result:</p>
<ul>
  <li>boolean, i.e., <code>true</code> or <code>false</code></li>
  <li>truthy, e.g., <code>{:foo :bar}</code> which represents <code>true</code> and is used to update the context</li>
  <li>vector of boolean and context update, e.g., <code>[true, {:foo :bar}]</code></li>
</ul>
<p>The resulting decision merges these return values in such a way that both the boolean result of the decision is retained and all context updates are made correctly.</p>
<p>The decisions are applied in the order <code>left</code> first, then <code>right</code>, such that the <code>right</code> decision will see any context updates made by the <code>left</code>.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L56">view source</a></div></div><div class="public anchor" id="var-merge-handlers"><h3>merge-handlers</h3><div class="usage"><code>(merge-handlers left right)</code></div><div class="doc"><div class="markdown"><p>Merges together two liberator handlers, <code>left</code> and <code>right</code>.</p>
<p>Currently, the <code>left</code> handler is discarded and the <code>right</code> is used in its place. In future, this may be improved such that some aspect of the <code>left</code> handler is retained.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L108">view source</a></div></div><div class="public anchor" id="var-merge-resource-definitions"><h3>merge-resource-definitions</h3><div class="usage"><code>(merge-resource-definitions &amp; maps)</code></div><div class="doc"><div class="markdown"><p>Merges together multiple liberator resource definitions, specified as maps.</p>
<p>For the mechanism employed:</p>
<ul>
  <li>for liberator decisions, see <a href="liberator-mixin.core.html#var-merge-decisions">merge-decisions</a>,</li>
  <li>for liberator actions, see <a href="liberator-mixin.core.html#var-merge-actions">merge-actions</a>,</li>
  <li>for liberator handlers, see <a href="liberator-mixin.core.html#var-merge-handlers">merge-handlers</a>,</li>
  <li>for liberator configuration, see <a href="liberator-mixin.core.html#var-merge-configurations">merge-configurations</a>.</li>
</ul>
<p>Any other map keys that do not correspond to the above liberator definition types will be retained in the resulting resource definition. If the same non-liberator definition map key is specified more than once, the rightmost definition takes precedence.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L185">view source</a></div></div><div class="public anchor" id="var-or-comparator"><h3>or-comparator</h3><div class="usage"><code>(or-comparator left right)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L171">view source</a></div></div><div class="public anchor" id="var-or-decisions"><h3>or-decisions</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/1.0.0/src/liberator_mixin/core.clj#L158">view source</a></div></div></div></body></html>